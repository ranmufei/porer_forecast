风力发电预测文档

一、风场环境建模

步骤1：风切变修正模型（Logarithmic Wind Profile）
公式：
  $$v_{h} = v_{ref}\cdot\frac{\ln(h/z_{0})}{\ln(z_{ref}/z_{0})}$$ 
参数：
1. vh：表示高度为h处的平均风速。即特定高度h上的风速值。
2. vref：是参考高度zref处的平均风速。它是一个已知的风速值，作为计算其他高度风速的参考依据。
3. h：是需要计算风速的目标高度。
4. zref：参考高度，通常是一个已经测量得到风速vref的特定高度，该高度的选择在实际应用中根据具体情况而定。
5. z0：称为粗糙度长度，它是一个反映下垫面粗糙程度的参数。下垫面（如草地、森林、城市建筑区等）的粗糙程度不同，z0的值也不同。例如，海面的粗糙度长度较小，而城市中心的粗糙度长度相对较大。

作用：将气象站风速修正到风机实际高度。

AI修正：
算法：线性回归
作用：用于修正实际高度的平均风速
特征列：温度 temp
   预测风速pre_vh
  大气稳定度 asl
       气压 pressure
标签列：vh 实际风速

---
步骤2： 空气密度计算（Ideal Gas Law）
公式：
$$ \rho = \frac{P}{R \cdot T}$$ 
参数：
ρ：代表气体的密度，它表示单位体积内气体的质量，单位通常为千克每立方米（kg/m³）。
 P：是气体的压强，指的是气体作用在单位面积上的压力，单位一般为帕斯卡（Pa）。
R：是气体常数，对于不同的气体，其值有所不同。在国际单位制中，通用气体常数 \(R = 8.314\ J/(mol\cdot K)\) ，在特定情况下，也会使用针对某种气体的特定气体常数。
T：为气体的热力学温度，单位是开尔文（K），它与摄氏温度 \(t\)（单位：℃）的关系是 \(T=t + 273.15\)。
作用：空气密度影响风能捕获效率。
AI 修正：

作用：更精准地计算空气密度，提高风能捕获效率计算的准确性。
算法：线性回归
特征列：
湿度 humidity
海拔 altitude
风速 v
标签列：
ρ 实际空气密度

步骤3：计算风向余弦
公式：Scos=cos(θ)
  θ = WD - FD
  合并：$$S_{cos} = cos(WD-FD)$$
参数：
WD：风向角度
FD：风机朝向角度
作用：计算风机方向与风向的夹角的余弦值，用于后续计算风向衰减系数

步骤4：计算风向影响因子
公式：Iwind=Scos⋅kyaw⋅kterrain
$$I_{wind}=S_{cos}\cdot k_{yaw}\cdot k_{terrain}$$
参数：
kterrain：地形干扰系数
kyaw：偏航响应系数
Iwind：风向影响因子
作用：计算风风场地形对风向的干扰程度，用于后续计算风向衰减系数
AI修正：
算法：线性回归
特征列
风向角度  WD
风机朝向角度 FD
风机高度 h
风速 vh
计算风向影响因素 Iwind
标签列
修正风向影响因素 Iwind

---
二、风机气动模型
步骤1：理论功率计算（Betz Limit修正）
公式：
$$P_{theory}=\frac{1}{2}\cdot\rho\cdot(\pi R^{2})\cdot v_{h,final}^{3}\cdot C_{p}(\lambda,\beta)\cdot I_{wind}$$ 
转译为代码
import math


def calculate(obj):
    rho = obj["rho"]
    R = obj["R"]
    v_h_final = obj["v_h_final"]
    C_p = obj["C_p"]
    I_wind = obj["I_wind"]
    P_theory = 0.5 * rho * (math.pi * R ** 2) * v_h_final ** 3 * C_p * I_wind
    return P_theory

参数：
Ptheory：表示风力发电机的理论功率，单位为瓦特（W），它是在理想情况下，风力发电机从风中获取的功率大小。
ρ：是空气密度，单位是千克每立方米（kg/m³）。空气密度会受到温度、气压和湿度等因素的影响，在标准状况下（0°C，1标准大气压），空气密度约为1.29 kg/m³。
A：指的是风力发电机叶片扫过的面积，单位是平方米（m²），其大小与叶片的半径有关，A = πR²（R为叶片半径）。
vh,final：代表风速，单位是米每秒（m/s），即风吹过的速度，风速的大小对风力发电机的功率输出有显著影响。
Cp(λ,β)：称为功率系数，它是一个与叶尖速比λ和桨距角β有关的函数。叶尖速比λ是叶片尖端线速度与风速的比值，桨距角β是叶片与气流方向的夹角。功率系数反映了风力发电机将风能转化为机械能的效率，其值一般在0到0.593（贝兹极限）之间。来自步骤2修正结果后
IWind： 风向影响因子
作用：基于风机设计参数计算理论发电功率。

---
步骤2：尾流效应模型（Jensen模型）
公式：
$$v_{wake}=v_0\cdot\left(1 - \frac{2a}{1 + k\cdot x/D}\right)$$

$$v_{h,\text{final}}=v_{\text{wake}}\cdot S_{\cos}\cdot I_{wind}$$
转译为代码
def calculate(obj):
    # 从对象中获取所需参数
    v_0 = obj["v_0"]
    a = obj["a"]
    k = obj["k"]
    x = obj["x"]
    D = obj["D"]
    S_cos = obj["S_cos"]
    I_wind = obj["I_wind"]

    # 计算 v_wake
    v_wake = v_0 * (1 - (2 * a) / (1 + k * x / D))

    # 计算 v_h_final
    v_h_final = v_wake * S_cos * I_wind

    return v_h_final
    

参数：
 vwake：表示尾流区域某位置处的风速。也就是在风力发电机后方尾流影响范围内特定位置的实际风速。
 v：是来流风速，即未受到风力发电机影响的上游自由气流的风速。
 a：为轴向诱导因子，它反映了风力发电机对气流的阻碍和扰动程度，与风力发电机的叶片设计、运行状态等有关。
 k：是尾流扩展系数，该系数取决于大气稳定度等环境因素，它描述了尾流在下游方向的扩散程度。
 x：是沿来流方向距离风力发电机的位置，即从风力发电机到所关心的尾流位置的距离。
 D：是风力发电机叶片的直径，它是描述风力发电机尺寸大小的一个重要参数。
 vh,final：最终风速
- 作用：量化上游风机对下游风速的衰减效应。

---
三、环境损耗修正
步骤1： 结冰功率损失模型
公式：
$$P_{ice}=P_{theory}\cdot(1 - \eta_{ice}\cdot p_{ice})$$

转译为代码
def calculate(obj):
    p_theory = obj["p_theory"]
    eta_ice = obj["eta_ice"]
    p_ice = obj["p_ice"]
    return p_theory * (1 - eta_ice * p_ice)

参数：
Pice：表示考虑结冰情况下风力发电机的实际功率，单位为瓦特（W）。它是在风力发电机叶片等部件出现结冰现象时，发电机最终的功率输出值。
Ptheory：是风力发电机的理论功率，单位为瓦特（W）。即在理想状态下，不考虑任何损失（如结冰等因素）时，风力发电机从风中获取的功率大小。（见风机气动模型步骤1计算结果）
ηice：称为结冰功率损失系数，它是一个表示由于结冰导致功率损失程度的系数，数值在0到1之间。该系数反映了结冰对风力发电机性能的影响程度，值越大表示结冰导致的功率损失越大。
pice：代表结冰概率，即风力发电机叶片等部件出现结冰现象的可能性大小，数值在0到1之间。它与环境温度、湿度、风速等气象条件有关。
作用：修正结冰导致的叶片气动性能下降。

---
步骤2：高温降效模型
公式：
$$P_{temp}=\begin{cases}P_{ice}\cdot[1 - 0.005\cdot(T - 35)], & T>35^{\circ}C \\ P_{ice}, & T\leq35^{\circ}C\end{cases}$$
 
代码
def calculate(obj):
    T = obj["T"]
    P_ice = obj["P_ice"]
    if T > 35:
        P_temp = P_ice * (1 - 0.005 * (T - 35))
    else:
        P_temp = P_ice
    return P_temp

参数：
 Ptemp：表示考虑温度影响后风力发电机的实际功率，单位为瓦特（W）。它是结合了不同温度条件下发电机的功率输出情况。
Ptheory：是风力发电机的理论功率，单位为瓦特（W），即不考虑温度等外界因素影响时，发电机从风中获取的功率。
T：代表环境温度，单位是摄氏度（℃）。环境温度的变化会对风力发电机的性能产生影响。
当环境温度 T 大于 35℃时，功率会因温度升高而下降。此时实际功率 Ptemp 由公式 Ptheory·[1 - 0.005·(T - 35)]计算得出，其中 0.005 是一个经验系数，表示温度每升高 1℃功率的下降比例。
当环境温度 T 小于等于 35℃时，温度对风力发电机功率没有额外的负面影响，实际功率 Ptemp 就等于理论功率 Ptheory。
作用：量化高温对发电机散热效率的影响。

AI修正：
  将环境温度修正成经验系数
  特征列：
  预测环境温度
  风速
  气压
  湿度
  降水量 
  标签列： 
  环境温度

---
四、机械传动模型
步骤1： 齿轮箱效率模型
公式：
$$\eta_{gearbox}=\eta_{nom}-k_{\tau}\cdot(\tau - \tau_{nom})^2$$
$$P_{gearbox}=P_{temp}\cdot\eta_{gearbox}$$
代码
def calculate(obj):
    eta_nom = obj["eta_nom"]
    k_tau = obj["k_tau"]
    tau = obj["tau"]
    tau_nom = obj["tau_nom"]
    P_temp = obj["P_temp"]

    eta_gearbox = eta_nom - k_tau * ((tau - tau_nom) ** 2)
    P_gearbox = P_temp * eta_gearbox
    return P_gearbox

参数：
ηgearbox：表示齿轮箱的实际效率。它是一个无量纲的数值，反映了齿轮箱在运行过程中将输入功率转化为输出功率的能力，数值一般在0到1之间。
ηnom：是齿轮箱的额定效率。即在正常的额定工况下，齿轮箱的效率值，同样是一个无量纲的数值。
kτ：称为扭矩影响系数，它是一个与齿轮箱的设计、制造材料等因素有关的常数，用于衡量扭矩变化对齿轮箱效率的影响程度，单位取决于τ的单位。
τ：代表齿轮箱所承受的实际扭矩，单位通常为牛顿·米（N·m），其大小会随着风力发电机的运行工况而变化。
τnom：是齿轮箱的额定扭矩，单位也是牛顿·米（N·m），表示齿轮箱在设计时所规定的正常工作扭矩值。
作用：量化传动系统机械损耗。

---
步骤2：发电机效率模型
公式：
$$\eta_{gen}=\eta_{max}-c_T\cdot(T_{winding}-T_{opt})^2$$
$$P_{gen}=P_{gearbox}\cdot\eta_{gen}$$
代码
def calculate(obj):
    # 从对象中获取所需参数
    eta_max = obj["eta_max"]
    c_T = obj["c_T"]
    T_winding = obj["T_winding"]
    T_opt = obj["T_opt"]
    P_gearbox = obj["P_gearbox"]

    # 计算 eta_gen
    eta_gen = eta_max - c_T * ((T_winding - T_opt) ** 2)

    # 计算 P_gen
    P_gen = P_gearbox * eta_gen

    return P_gen

 
参数：
- ηgen：发电机效率，是一个无量纲的数值，反映了发电机将机械能转化为电能的效率，其值一般在 0 到 1 之间，数值越大表示发电机将机械能转化为电能的能力越强 。
- ηmax：发电机最大效率，通常在 95% - 97% 之间，是发电机在理想条件下能够达到的最高效率值，由发电机的设计和制造工艺决定。
- cT：温度影响系数，单位为1/∘C2，约为0.02/∘C2。该系数衡量了绕组温度变化对发电机效率的影响程度，其值越大，说明绕组温度变化对发电机效率的影响越显著。
- Twinding：绕组温度，单位是摄氏度（∘C），指发电机绕组工作时的温度。绕组温度会随着发电机负载和环境温度的变化而变化，过高或过低的绕组温度都会影响发电机的效率。
- Topt：最佳运行温度，通常为80∘C ，是发电机运行时能达到最高效率的绕组温度值。当绕组温度偏离最佳运行温度时，发电机效率会下降，该公式通过(Twinding−Topt)2这一项来体现这种效率下降的程度。
- 作用：量化温度对电磁转换效率的影响。

---
五、控制约束模型
步骤1：功率爬坡率限制
公式：
$$P_{grid}(t)=\begin{cases}P_{grid}(t - 1)+\Delta P_{max}, & P_{gen}-P_{grid}(t - 1)>\Delta P_{max} \\ P_{gen}, & otherwise\end{cases}$$
代码
def calculate(obj):
    P_gen = obj["P_gen"]
    P_grid_prev = obj["P_grid_prev"]
    delta_P_max = obj["delta_P_max"]

    if P_gen - P_grid_prev > delta_P_max:
        return P_grid_prev + delta_P_max
    else:
        return P_gen



Pgrid(t)：表示在时刻 t 接入电网的功率，单位通常为瓦特（W）或千瓦（kW）等功率单位，它是根据当前时刻的其他条件计算得出的接入电网的实际功率值。
Pgrid(t - 1)：是上一时刻 t - 1 接入电网的功率，同样单位为瓦特（W）或千瓦（kW）等，用于与当前时刻的其他参数进行比较和计算。
ΔPmax：称为最大功率变化量，它表示在相邻两个时刻之间，接入电网的功率允许的最大变化幅度，单位与功率单位相同。这个值由电网的稳定性要求、设备的性能等因素决定。
Pgen：代表发电机在时刻 t 产生的电功率，单位也是瓦特（W）或千瓦（kW）等。它是发电机实际发出的功率，需要根据具体的发电设备和运行工况来确定。（见机械传动模型步骤2结果）
 
参数：
- ΔPmax：最大允许爬坡率（如5 MW/min）
作用：确保电网稳定性，避免功率突变。
说明：
这个公式是一个分段函数形式。当发电机产生的电功率 Pelec 与上一时刻接入电网的功率 Pgrid(t - 1) 的差值大于最大功率变化量 ΔPmax 时，为了保证电网的稳定和设备的安全，接入电网的功率 Pgrid(t) 是在上一时刻功率的基础上加上最大功率变化量 ΔPmax ；否则，接入电网的功率 Pgrid(t) 就直接等于发电机产生的电功率 Pelec 。通过这个公式，可以合理地控制和调节接入电网的功率，确保电网的稳定运行。


---
参数获取途径
暂时无法在飞书文档外展示此内容

---
完整模型链公式串联示例
1. 输入气象数据
风速 \(v_{10}=8\ m/s\)，温度 \(T = 15^{\circ}C\)，气压 \(P = 1013\ hPa\)

2. 风切变修正
使用对数风廓线公式 \(v_{h}=v_{ref}\cdot\frac{\ln(h/z_{0})}{\ln(z_{ref}/z_{0})}\)，这里 \(v_{ref}=v_{10} = 8\ m/s\)，\(z_{ref}=10\ m\)，\(h = 120\ m\)，\(z_{0}=0.1\ m\)
\[v_{120m}=8\times\frac{\ln(120/0.1)}{\ln(10/0.1)}\approx9.2\ m/s\]

3. 空气密度计算
根据理想气体状态方程变形公式 \(\rho=\frac{P}{R\cdot T}\)，其中 \(P = 1013\ hPa=101300\ Pa\)，\(R = 287\ J/(kg\cdot K)\)，\(T=(15 + 273.15)\ K=288.15\ K\)
\[\rho=\frac{101300}{287\times288.15}\approx1.225\ kg/m^{3}\]

4. 理论功率计算
使用公式 \(P_{theory}=\frac{1}{2}\cdot\rho\cdot A\cdot v^{3}\cdot C_{p}\)，其中 \(A=\pi R^{2}\)，\(\rho = 1.225\ kg/m^{3}\)，\(R = 65\ m\)，\(v = v_{120m}=9.2\ m/s\)，\(C_{p}=0.45\)
\[P_{theory}=0.5\times1.225\times\pi\times65^{2}\times9.2^{3}\times0.45\approx2.98\ MW\]

5. 结冰修正
使用公式 \(P_{ice}=P_{theory}\cdot(1 - \eta_{ice}\cdot p_{ice})\)，其中 \(P_{theory}=2.98\ MW\)，\(\eta_{ice}=0.2\)，\(p_{ice}=0.3\)
\[P_{ice}=2.98\times(1 - 0.2\times0.3)=2.82\ MW\]

6. 并网功率输出
考虑爬坡率限制，公式为 \(P_{grid}=\min(2.82,P_{prev}+2)\)



完整模型链
风速修正计算
  - 风切变修正风速：$$v_{h}=v_{ref}\cdot\frac{\ln(h/z_{0})}{\ln(z_{ref}/z_{0})}$$
  - 结合风向余弦和风向影响因子的风速综合修正：$v_{h,final}=v_{h}\cdot S_{cos}\cdot I_{wind}$，其中$S_{cos}=\cos(WD - FD)$，$$I_{wind}=S_{cos}\cdot k_{yaw}\cdot k_{terrain}$$
1. 空气密度计算：$$\rho=\frac{P}{R\cdot T}$$
2. 理论功率计算：$$P_{theory}=\frac{1}{2}\cdot\rho\cdot(\pi R^{2})\cdot v_{h,final}^{3}\cdot C_{p}(\lambda,\beta)\cdot I_{wind}$$
3. 环境损耗修正功率计算
  - 结冰修正功率：$$P_{ice}=P_{theory}\cdot(1 - \eta_{ice}\cdot p_{ice})$$
  - 高温修正功率：$$P_{temp}=\begin{cases}P_{ice}\cdot[1 - 0.005\cdot(T - 35)], & T>35^{\circ}C \\ P_{ice}, & T\leq35^{\circ}C\end{cases}$$
4. 机械传动损耗后功率计算
  - 齿轮箱损耗后功率：$P_{gearbox}=P_{temp}\cdot\eta_{gearbox}$，其中$$\eta_{gearbox}=\eta_{nom}-k_{\tau}\cdot(\tau-\tau_{nom})^{2}$$
  - 发电机损耗后功率：$P_{gen}=P_{gearbox}\cdot\eta_{gen}$，其中$$\eta_{gen}=\eta_{max}-c_T\cdot(T_{winding}-T_{opt})^{2}$$
5. 并网功率计算
  - 考虑功率爬坡率限制的并网功率：$$P_{grid}(t)=\begin{cases}P_{grid}(t - 1)+\Delta P_{max}, & P_{gen}-P_{grid}(t - 1)>\Delta P_{max} \\ P_{gen}, & otherwise\end{cases}$$

将上述公式逐步代入简化，可得汇总公式（从气象数据和风机基础参数到并网功率）：
$$P_{grid}(t)=\begin{cases}
P_{grid}(t - 1)+\Delta P_{max}, & 
\frac{1}{2}\cdot\frac{P}{R\cdot T}\cdot(\pi R^{2})\cdot\left(v_{ref}\cdot\frac{\ln(h/z_{0})}{\ln(z_{ref}/z_{0})}\cdot\cos(WD - FD)\cdot\cos(WD - FD)\cdot k_{yaw}\cdot k_{terrain}\right)^{3}\cdot C_{p}(\lambda,\beta)\cdot\cos(WD - FD)\cdot k_{yaw}\cdot k_{terrain}\cdot(1 - \eta_{ice}\cdot p_{ice})\cdot\begin{cases}
[1 - 0.005\cdot(T - 35)], & T>35^{\circ}C \\
1, & T\leq35^{\circ}C
\end{cases}\cdot\left(\eta_{nom}-k_{\tau}\cdot(\tau-\tau_{nom})^{2}\right)\cdot\left(\eta_{max}-c_T\cdot(T_{winding}-T_{opt})^{2}\right)-P_{grid}(t - 1)>\Delta P_{max} \\
\frac{1}{2}\cdot\frac{P}{R\cdot T}\cdot(\pi R^{2})\cdot\left(v_{ref}\cdot\frac{\ln(h/z_{0})}{\ln(z_{ref}/z_{0})}\cdot\cos(WD - FD)\cdot\cos(WD - FD)\cdot k_{yaw}\cdot k_{terrain}\right)^{3}\cdot C_{p}(\lambda,\beta)\cdot\cos(WD - FD)\cdot k_{yaw}\cdot k_{terrain}\cdot(1 - \eta_{ice}\cdot p_{ice})\cdot\begin{cases}
[1 - 0.005\cdot(T - 35)], & T>35^{\circ}C \\
1, & T\leq35^{\circ}C
\end{cases}\cdot\left(\eta_{nom}-k_{\tau}\cdot(\tau-\tau_{nom})^{2}\right)\cdot\left(\eta_{max}-c_T\cdot(T_{winding}-T_{opt})^{2}\right), & otherwise
\end{cases}$$

---
关键物理参数表
暂时无法在飞书文档外展示此内容
